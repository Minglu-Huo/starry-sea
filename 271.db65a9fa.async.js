"use strict";(self.webpackChunkstarry_sea=self.webpackChunkstarry_sea||[]).push([[271],{18271:function(gt,_,d){d.r(_),d.d(_,{SApiSelector:function(){return fe},SGlobalConfigProvider:function(){return me},STable:function(){return vt}});var Y=d(10932),v=d(67294),t=d(85893),ce=function(n){return(0,t.jsxs)("h4",{children:[n.title,(0,t.jsx)(Y.ZP,{children:"\u6309\u94AE"})]})},de=ce,fe=de,ve=d(13769),ee=d.n(ve),te=v.createContext(null),he=["children"];function ge(e){var n=e.children,l=ee()(e,he);return(0,t.jsx)(te.Provider,{value:l,children:n})}var me=ge,Se=d(97857),p=d.n(Se),pe=d(5574),N=d.n(pe),K=d(25968),A=d(6226),xe=d(623),I=d(96486),ne=d(73445),Ce=d(81977),ye=d(34821),Re=d(55192),je=d(21284),J=d(16165),be=d(71146),Ze=d(23521),Pe=d(77145),Fe=d(15026),B=d(61781),Me=d(18707),we=d(55959),Ee=d(74627),L=d(47489),Q=v.createContext(null);function re(e){if(!Array.isArray(e))return{};var n={};return e.forEach(function(l,a){var o="";l.key?o=l.key:l.dataIndex&&(o=l.dataIndex.toString()),n[o]={title:l.title,hidden:l.hidden,fixed:l.fixed,order:a,key:o}}),n}var $e=function(){return(0,t.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024",children:(0,t.jsx)("path",{d:"M639.627772 892.931872 226.749304 892.931872c-54.56985 0-98.806353-44.237527-98.806353-98.806353L127.942951 226.14146c0-54.56985 44.237527-98.806353 98.806353-98.806353l569.914014 0c54.56985 0 98.806353 44.237527 98.806353 98.806353l0 413.525198 63.960731 0L959.430402 209.447243c0-80.317257-65.109903-145.426137-145.426137-145.426137L209.408357 64.021106c-80.316234 0-145.426137 65.109903-145.426137 145.426137L63.98222 814.043151c0 80.317257 65.109903 145.426137 145.426137 145.426137l430.219415 0L639.627772 892.931872zM959.430402 921.185356 710.73425 672.489204c35.524075-43.930535 56.81396-99.846032 56.81396-160.742984 0-141.29812-114.544803-255.842922-255.842922-255.842922S255.863389 370.447077 255.863389 511.745197s114.544803 255.842922 255.842922 255.842922c60.896952 0 116.813472-21.289885 160.744008-56.81396l248.696152 248.696152L959.430402 921.185356zM511.706311 703.627389c-105.97359 0-191.882192-85.908602-191.882192-191.882192s85.908602-191.882192 191.882192-191.882192 191.882192 85.908602 191.882192 191.882192S617.679901 703.627389 511.706311 703.627389z",fill:"#272636"})})},Ae=function(){return(0,t.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024",children:(0,t.jsx)("path",{d:"M512 993.415l275.094-412.641H236.906z m0-962.83L236.906 443.226h550.188z",fill:"#333333"})})},Te=function(){return(0,t.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024",children:(0,t.jsx)("path",{d:"M481.706667 414.293333a42.666667 42.666667 0 0 0 60.586666 0l213.333334-213.333333a42.666667 42.666667 0 1 0-60.586667-60.586667L512 323.84l-183.04-183.466667a42.666667 42.666667 0 0 0-60.586667 60.586667z m60.586666 195.413334a42.666667 42.666667 0 0 0-60.586666 0l-213.333334 213.333333a42.666667 42.666667 0 0 0 60.586667 60.586667l183.04-183.466667 183.04 183.466667a42.666667 42.666667 0 0 0 60.586667 0 42.666667 42.666667 0 0 0 0-60.586667z"})})},Oe=function(){return(0,t.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024",children:(0,t.jsx)("path",{d:"M200.96 268.373333a42.666667 42.666667 0 0 0-60.586667 60.586667L323.84 512l-183.466667 183.04a42.666667 42.666667 0 0 0 0 60.586667 42.666667 42.666667 0 0 0 60.586667 0l213.333333-213.333334a42.666667 42.666667 0 0 0 0-60.586666zM700.16 512l183.466667-183.04a42.666667 42.666667 0 1 0-60.586667-60.586667l-213.333333 213.333334a42.666667 42.666667 0 0 0 0 60.586666l213.333333 213.333334a42.666667 42.666667 0 0 0 60.586667 0 42.666667 42.666667 0 0 0 0-60.586667z"})})},Ie=function(){return(0,t.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024",children:(0,t.jsx)("path",{d:"M409.6 307.2l-256 204.8 256 204.8zM614.4 307.2l256 204.8-256 204.8z",fill:"#000000"})})};function U(e){var n=e.colSettingsOptions,l=e.handleFixed,a=e.handleDrop,o=e.handleChange,u=e.checkedKeys,x=e.title,g=e.fixed,i=v.useState(""),f=N()(i,2),s=f[0],C=f[1],Z=u.filter(function(r){return n.some(function(c){return c.key===r})}),m=function(c){var h=(0,t.jsx)(B.Z,{title:"\u56FA\u5B9A\u5728\u5DE6\u4FA7",children:(0,t.jsx)(Ce.Z,{onClick:l(c,"left"),style:{color:"#1677FF"}})}),R=(0,t.jsx)(B.Z,{title:"\u56FA\u5B9A\u5728\u53F3\u4FA7",children:(0,t.jsx)(ye.Z,{onClick:l(c,"right"),style:{color:"#1677FF"}})}),S=(0,t.jsxs)(B.Z,{title:"\u53D6\u6D88\u56FA\u5B9A",children:[(0,t.jsx)(Re.Z,{onClick:l(c),style:{color:"#1677FF"}}),"bbb"]});return g==="left"?(0,t.jsxs)(A.Z,{children:[S,R]}):g==="right"?(0,t.jsxs)(A.Z,{children:[h,S]}):(0,t.jsxs)(A.Z,{children:[h,R]})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(Me.Z.Text,{type:"secondary",children:[" ",x]}),(0,t.jsx)(we.Z,{treeData:n,checkedKeys:Z,blockNode:!0,titleRender:function(c){return(0,t.jsxs)(K.Z,{justify:"space-between",onClick:function(R){return R.stopPropagation()},onMouseMove:function(){return C(c.key)},children:[(0,t.jsx)(A.Z,{children:c.title}),s===c.key&&m(c.key)]})},onDrop:a,selectable:!1,onCheck:o,checkable:!0,draggable:!0})]})}function We(e){var n=e.colSettingsOptions,l=e.handleFixed,a=e.handleDrop,o=e.handleChange,u=e.checkedKeys,x=n.filter(function(s){return s.fixed==="left"}),g=n.filter(function(s){return s.fixed==="right"}),i=n.filter(function(s){return s.fixed!=="right"&&s.fixed!=="left"}),f=!0;return(x.length===0&&g.length===0||x.length===0&&i.length===0||g.length===0&&i.length===0)&&(f=!1),(0,t.jsxs)("div",{children:[x.length>0?(0,t.jsx)(U,{title:f?"\u56FA\u5B9A\u5728\u5DE6\u4FA7":"",fixed:"left",colSettingsOptions:x,handleFixed:l,handleChange:o,handleDrop:a,checkedKeys:u}):null,i.length>0?(0,t.jsx)(U,{title:f?"\u672A\u56FA\u5B9A":"",colSettingsOptions:i,handleFixed:l,handleChange:o,handleDrop:a,checkedKeys:u}):null,g.length>0?(0,t.jsx)(U,{fixed:"right",title:f?"\u56FA\u5B9A\u5728\u53F3\u4FA7":"",colSettingsOptions:g,handleFixed:l,handleChange:o,handleDrop:a,checkedKeys:u}):null]})}function ze(){var e,n,l,a,o,u,x,g,i,f,s,C,Z=v.useContext(Q);if(!Z)throw new Error("Missing StoreProvider");var m=(0,ne.oR)(Z,function(y){return{control:y.control,columnMap:y.columnMap,columns:y.columns,loading:y.loading,action:y.action,tableWrapRef:y.tableWrapRef,onScreenfullRef:y.onScreenfullRef,screenfullWrapRef:y.screenfullWrapRef}}),r=m.control,c=m.columnMap,h=m.loading,R=m.columns,S=m.tableWrapRef,M=m.onScreenfullRef,T=m.screenfullWrapRef,j=m.action,b=j.setControl,P=j.refresh,W=j.setColumnMap,w=v.useRef(null);v.useEffect(function(){var y=function(){L.Z.isFullscreen?b("screenfull",{status:2}):b("screenfull",{status:1})};return L.Z.on("change",y),function(){L.Z.off("change",y)}},[]);var z=v.useMemo(function(){return Object.keys(c).filter(function(y){return c[y].hidden!==!0})},[c]),O=function(E,D){return function(){switch(E){case"search":b(E,{status:D});case"scrollX":case"scrollY":b(E,{status:D});break;case"screenfull":if((0,I.isFunction)(M==null?void 0:M.current)){M.current();return}L.Z.isFullscreen?L.Z.exit():T.current?L.Z.request(T.current):S.current&&L.Z.request(S.current);break;default:break}}},F=v.useMemo(function(){if(!c)return[];var y=Object.keys(c);return y.map(function(E){return{title:c[E].title,key:E,fixed:c[E].fixed}}).sort(function(E,D){return c[E.key].order-c[D.key].order})},[c]),V=function(){W(re(R))},X=function(E,D){return function(){var k=(0,I.cloneDeep)(c);k[E].fixed=D,W(k)}},$=v.useCallback(function(y){var E=(0,I.cloneDeep)(c),D=Object.keys(E);D.forEach(function(k){y.includes(k)?E[k].hidden=!1:E[k].hidden=!0}),W(E)},[W,c]),H=v.useCallback(function(y){var E=y.node,D=y.dragNode,k=(0,I.cloneDeep)(c),ue=k[E.key],se=k[D.key],ht=ue.order;ue.order=se.order,se.order=ht,W(k)},[c,W]);return(0,t.jsxs)(K.Z,{gutter:[5,5],children:[(r==null||(e=r.search)===null||e===void 0?void 0:e.visible)&&(0,t.jsx)(A.Z,{children:(0,t.jsx)(B.Z,{title:(n=r.search.option)===null||n===void 0?void 0:n.statusMap[r.search.status].title,getPopupContainer:function(){return w.current},children:(0,t.jsx)(Y.ZP,{disabled:r.search.disabled,onClick:O("search",r.search.status===1?2:1),icon:r.search.status===1?(0,t.jsx)(je.Z,{}):(0,t.jsx)(J.Z,{component:$e})})})}),(r==null||(l=r.screenfull)===null||l===void 0?void 0:l.visible)&&(0,t.jsx)(A.Z,{children:(0,t.jsx)(B.Z,{title:(a=r.screenfull.option)===null||a===void 0?void 0:a.statusMap[r.screenfull.status].title,getPopupContainer:function(){return w.current},children:(0,t.jsx)(Y.ZP,{onClick:O("screenfull"),disabled:r.screenfull.disabled,icon:r.screenfull.status===1?(0,t.jsx)(be.Z,{}):(0,t.jsx)(Ze.Z,{})})})}),(r==null||(o=r.scrollX)===null||o===void 0?void 0:o.visible)&&(0,t.jsx)(A.Z,{children:(0,t.jsx)(B.Z,{title:(u=r.scrollX.option)===null||u===void 0?void 0:u.statusMap[r.scrollX.status].title,getPopupContainer:function(){return w.current},children:(0,t.jsx)(Y.ZP,{disabled:r.scrollX.disabled,onClick:O("scrollX",r.scrollX.status===1?2:1),icon:(0,t.jsx)(J.Z,{component:r.scrollX.status===1?Ie:Oe})})})}),(r==null||(x=r.scrollY)===null||x===void 0?void 0:x.visible)&&(0,t.jsx)(A.Z,{children:(0,t.jsx)(B.Z,{title:(g=r.scrollY.option)===null||g===void 0?void 0:g.statusMap[r.scrollY.status].title,getPopupContainer:function(){return w.current},children:(0,t.jsx)(Y.ZP,{disabled:r.scrollY.disabled,onClick:O("scrollY",r.scrollY.status===1?2:1),icon:(0,t.jsx)(J.Z,{component:r.scrollY.status===1?Ae:Te})})})}),(r==null||(i=r.refresh)===null||i===void 0?void 0:i.visible)&&(0,t.jsx)(A.Z,{children:(0,t.jsx)(B.Z,{title:(f=r.refresh.option)===null||f===void 0?void 0:f.statusMap[r.refresh.status].title,getPopupContainer:function(){return w.current},children:(0,t.jsx)(Y.ZP,{onClick:P,disabled:r.refresh.disabled,icon:(0,t.jsx)(Pe.Z,{spin:h})})})}),(r==null||(s=r.colSettings)===null||s===void 0?void 0:s.visible)&&(0,t.jsx)(A.Z,{ref:w,children:(0,t.jsx)(Ee.Z,{placement:"leftBottom",showArrow:!0,trigger:"click",getPopupContainer:function(){return w.current},title:(0,t.jsxs)(K.Z,{justify:"space-between",align:"middle",children:[(0,t.jsx)(A.Z,{children:"\u5217\u8BBE\u7F6E"}),(0,t.jsx)(A.Z,{children:(0,t.jsx)(Y.ZP,{type:"link",onClick:V,children:"\u91CD\u7F6E"})})]}),content:(0,t.jsx)(We,{handleChange:$,handleFixed:X,colSettingsOptions:F,handleDrop:H,checkedKeys:z}),children:(0,t.jsx)(B.Z,{title:(C=r.colSettings.option)===null||C===void 0?void 0:C.statusMap[r.colSettings.status].title,getPopupContainer:function(){return w.current},children:(0,t.jsx)(Y.ZP,{disabled:r.colSettings.disabled,icon:(0,t.jsx)(Fe.Z,{})})})})})]})}var Be=v.memo(ze),le={dataSource:[],loading:!1,columns:[],showInteractionOnSreenfull:!1,tableWrapRef:{current:null},screenfullWrapRef:{current:null},formatParamsRef:{current:void 0},formatResultRef:{current:void 0},onScreenfullRef:{current:void 0},control:{screenfull:{visible:!0,disabled:!1,status:1,option:{statusMap:{1:{title:"\u5168\u5C4F"},2:{title:"\u9000\u51FA\u5168\u5C4F"}}}},scrollY:{visible:!0,disabled:!1,status:1,option:{offset:100,statusMap:{1:{title:"\u5F00\u542F\u7EB5\u5411\u6EDA\u52A8"},2:{title:"\u5173\u95ED\u7EB5\u5411\u6EDA\u52A8"}}}},scrollX:{visible:!1,disabled:!1,status:1,option:{statusMap:{1:{title:"\u5F00\u542F\u6A2A\u5411\u6EDA\u52A8"},2:{title:"\u5173\u95ED\u6A2A\u5411\u6EDA\u52A8"}}}},search:{visible:!1,disabled:!1,status:1,option:{statusMap:{1:{title:"\u9AD8\u7EA7\u67E5\u8BE2"},2:{title:"\u7B80\u6613\u67E5\u8BE2"}}}},refresh:{visible:!0,disabled:!1,status:1,option:{statusMap:{1:{title:"\u5237\u65B0"}}}},colSettings:{visible:!0,disabled:!1,status:1,option:{statusMap:{1:{title:"\u5217\u8BBE\u7F6E"}}}}},serviceRef:{current:null},columnMap:{},fetchSettings:{pageSizeField:"size",pageNumField:"page"},resultSettings:{dataSourceField:"list",totalField:"total"},params:{page:1,size:10},columnProps:{align:"left"}},De=d(27484),ke=d.n(De);function Xe(e,n,l,a){if(typeof n=="function")return n(e,l,a);if(n instanceof Map)return n.get(e);var o="date|";if(typeof n=="string"&&n.startsWith(o)){var u=n.replace(o,"");return ke()(e).format(u)}return n==="tooltip"?(0,t.jsx)(B.Z,{title:e,children:e}):e}function Ye(e,n,l){var a=v.useMemo(function(){if(!Array.isArray(e))return[];var o=e.map(function(u){var x,g=u.key||((x=u.dataIndex)===null||x===void 0?void 0:x.toString()),i=n[g];if(!i)return p()(p()({},u),l);if(i.hidden===!0)return!1;var f=u.format,s=u.render;return f?!s&&f?p()(p()(p()({},u),l),{},{fixed:i.fixed,render:function(Z,m,r){return Xe(Z,f,m,r)}}):p()(p()({},u),l):p()(p()(p()({},u),l),{},{fixed:i.fixed})}).filter(Boolean);return o.sort(function(u,x){var g,i,f,s,C,Z,m=u.key||((g=u.dataIndex)===null||g===void 0?void 0:g.toString()),r=x.key||((i=x.dataIndex)===null||i===void 0?void 0:i.toString()),c=(f=n[m])===null||f===void 0?void 0:f.fixed,h=(s=n[r])===null||s===void 0?void 0:s.fixed;return c==="left"&&h!=="left"||h==="right"&&c!=="right"?-2:h==="left"&&c!=="left"||c==="right"&&h!=="right"?2:((C=n[m])===null||C===void 0?void 0:C.order)-((Z=n[r])===null||Z===void 0?void 0:Z.order)}),o},[e,l,n]);return[a]}function Le(e){var n=e.page,l=e.total,a=e.size,o=e.run,u=e.fStatic,x=v.useCallback(function(i,f,s){var C=i.pageSize,Z=i.current,m={size:C,page:Z,filters:f,sorters:s};o==null||o(m)},[o]),g=v.useMemo(function(){return u?{showQuickJumper:!0,showSizeChanger:!0,showTotal:function(f){return(0,t.jsxs)("span",{children:["\u5171",f,"\u6761"]})},itemRender:function(f,s,C){return s==="prev"?(0,t.jsx)("span",{className:"cursor-pointer",children:"\u4E0A\u4E00\u9875"}):s==="next"?(0,t.jsx)("span",{className:"cursor-pointer",children:"\u4E0B\u4E00\u9875"}):C}}:{showQuickJumper:!0,total:l,current:Number(n),pageSize:Number(a),showSizeChanger:!0,showTotal:function(f){return(0,t.jsxs)("span",{children:["\u5171",f,"\u6761"]})},itemRender:function(f,s,C){return s==="prev"?(0,t.jsx)("span",{className:"cursor-pointer",children:"\u4E0A\u4E00\u9875"}):s==="next"?(0,t.jsx)("span",{className:"cursor-pointer",children:"\u4E0B\u4E00\u9875"}):C}}},[n,a,l]);return{pagination:g,onChange:u?void 0:x}}var G="ant",Ne=d(40238);function He(e){var n=v.useRef(!0),l=v.useRef(null);return n.current&&(n.current=!1,l.current=e()),l}function Ke(e,n){var l=(0,Ne.Z)(e,n),a=l.run,o=He(function(){return n==null?void 0:n.immediate});return v.useEffect(function(){return window.addEventListener("resize",a),function(){window.removeEventListener("resize",a)}},[a]),v.useEffect(function(){o&&e()},[e,o]),[a]}function Ve(e){return!e||!e.getBoundingClientRect?null:e.getBoundingClientRect()}function Ge(e){if(!e)return{top:0,left:0,bottom:0,bottomIncludeBody:0,right:0,rightIncludeBody:0,docClientWidth:window.document.documentElement.clientWidth,docClientHeight:window.document.documentElement.clientHeight};var n=document.documentElement,l=n.clientLeft,a=n.clientTop,o=window.scrollX||n.scrollLeft,u=window.scrollY||n.scrollTop,x=Ve(e),g=x||{left:0,top:0,width:0,height:0},i=g.left,f=g.top,s=g.width,C=g.height,Z=o-(l||0),m=u-(a||0),r=i+o,c=f+u,h=r-Z,R=c-m,S=window.document.documentElement.clientWidth,M=window.document.documentElement.clientHeight;return{left:h,top:R,right:S-s-h,bottom:M-C-R,rightIncludeBody:S-h,bottomIncludeBody:M-R,docClientWidth:S,docClientHeight:M}}function Je(e,n){var l=n.pagination,a=n.columns,o=n.dataSource,u=n.scrollSwitch,x=v.useState({}),g=N()(x,2),i=g[0],f=g[1],s=v.useMemo(function(){var m,r,c,h;if(!((m=u.x)!==null&&m!==void 0&&m.disabled||((r=u.x)===null||r===void 0?void 0:r.status)===2)&&!(!Array.isArray(a)||!e.current||!Array.isArray(o)||o.length===0)){var R=0,S=150,M=(c=e.current)===null||c===void 0?void 0:c.nativeElement;a.forEach(function(P){P.width&&typeof P.width=="string"?R+=Number.parseInt(P.width,10):P.width&&typeof P.width=="number"&&(R+=P.width)});var T=a.filter(function(P){return!P.hidden}),j=T.filter(function(P){return!Reflect.has(P,"width")});j.length&&(R=j.length*S);var b=(h=M==null?void 0:M.offsetWidth)!==null&&h!==void 0?h:0;return b>R&&(R="100%"),R}},[u,a,o]),C=v.useMemo(function(){var m,r,c,h;if(!((u==null||(m=u.y)===null||m===void 0?void 0:m.status)===2||(r=u.y)!==null&&r!==void 0&&r.disabled)&&!(!Array.isArray(a)||!e.current||!Array.isArray(o)||o.length===0)){var R=u==null||(c=u.y)===null||c===void 0?void 0:c.option,S=(h=e.current)===null||h===void 0?void 0:h.nativeElement,M=S==null?void 0:S.querySelector(".".concat(G,"-table-tbody"));if(M){var T=S==null?void 0:S.querySelector(".".concat(G,"-table-thead")),j,b;if(T){var P=Ge(T),W=P.bottomIncludeBody,w=0;if(l)if(b=S==null?void 0:S.querySelector(".".concat(G,"-pagination")),b){var z,O,F,V=(z=b)===null||z===void 0?void 0:z.offsetHeight;w+=V||0,w+=parseInt((O=getComputedStyle(b))===null||O===void 0?void 0:O.marginTop,10),w+=parseInt((F=getComputedStyle(b))===null||F===void 0?void 0:F.marginBottom,10)}else w+=24;else w=-8;var X=0;if(!(0,I.isBoolean)(l))if(!j)j=S==null?void 0:S.querySelector(".".concat(G,"-table-footer"));else{var $=j.offsetHeight;X+=$||0}var H=0;T&&(H=T.offsetHeight);var y=W-w-X-H-(R==null?void 0:R.offset);return y}}}},[u,a,o,l]),Z=v.useCallback(function(){if(!s&&!C){f({});return}f({x:s,y:C})},[s,C]);return Ke(Z,{wait:300,immediate:!0}),console.log("\u{1F680} ~ scroll:",i),[i]}var Qe=d(15009),oe=d.n(Qe),Ue=d(52677),qe=d.n(Ue),_e=d(99289),et=d.n(_e),tt=d(9783),nt=d.n(tt),rt=d(43973),lt=d(782);function ot(){return(0,rt.M)()((0,lt.XR)(function(e,n){return p()(p()({},le),{},{action:{setDefaultVals:function(a){e(function(o){return p()(p()({},o),a)})},setColumnMap:function(a){e(function(o){return p()(p()({},o),{},{columnMap:a})})},setColumns:function(a){e(function(o){return p()(p()({},o),{},{columns:a})})},setControl:function(a,o){e(function(u){return p()(p()({},u),{},{control:p()(p()({},u.control),{},nt()({},a,p()(p()({},u.control[a]),o)))})})},run:function(){var l=et()(oe()().mark(function o(u){var x,g,i,f,s,C,Z,m,r,c,h,R,S,M;return oe()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(j.prev=0,g=n().serviceRef.current,(0,I.isFunction)(g)){j.next=4;break}return j.abrupt("return");case 4:return i=p()({},(0,I.merge)({},n().params,u)),e(function(b){return p()(p()({},b),{},{loading:!0,params:i})}),f=n().fetchSettings,s=(0,I.cloneDeep)(i),Reflect.has(s,f.pageNumField)||(s[f.pageNumField]=s.page,delete s.page),Reflect.has(s,f.pageSizeField)||(s[f.pageSizeField]=s.size,delete s.size),(0,I.isFunction)((x=n().formatParamsRef)===null||x===void 0?void 0:x.current)&&(s=(C=n().formatParamsRef)===null||C===void 0||(Z=C.current)===null||Z===void 0?void 0:Z.call(C,s)),m=n().resultSettings,r=m.dataSourceField,c=m.totalField,j.next=15,g(s);case 15:h=j.sent,R=n().formatResultRef,(0,I.isFunction)(R==null?void 0:R.current)&&(h=R.current(h)),qe()(h)==="object"&&h!==null&&!Array.isArray(h)&&Reflect.has(h,r)&&Array.isArray(h[r])&&(S=h[r],M=h[c]||S.length,S.forEach(function(b,P){b.frontendRowkey=b.id||P+1,n().fStatic?b.frontendSortnum=P+1:b.frontendSortnum=((i==null?void 0:i.page)-1)*(i==null?void 0:i.size)+P+1}),e(function(b){return p()(p()({},b),{},{dataSource:S,total:M,loading:!1})})),j.next=25;break;case 21:j.prev=21,j.t0=j.catch(0),e(function(b){return p()(p()({},b),{},{loading:!1})}),console.log("\u{1F680} ~ run: ~ error:",j.t0);case 25:case"end":return j.stop()}},o,null,[[0,21]])}));function a(o){return l.apply(this,arguments)}return a}(),refresh:function(){n().action.run()}}})}))}function ie(e){var n=v.useRef();return n.current||(e?n.current=e:n.current=ot()),[n.current]}var it=["service","dataSource","columns","loading","resultSettings","fetchSettings","defaultParams","control","interaction","tips","formatParams","formatResult","onScreenfull","table","manual","showInteractionOnSreenfull","screenfullWrapRef","columnProps","fStatic"],at={padding:20,background:"#fff"};function ut(e){var n=v.useContext(Q);if(!n)throw new Error("Missing StoreProvider");var l=(0,ne.oR)(n,function(F){return{dataSource:F.dataSource,columns:F.columns,columnProps:F.columnProps,loading:F.loading,run:F.action.run,total:F.total,fStatic:F.fStatic,columnsMap:F.columnMap,scroll:{y:F.control.scrollY,x:F.control.scrollX},params:F.params,screenfull:F.control.screenfull,showInteractionOnSreenfull:F.showInteractionOnSreenfull}}),a=l.dataSource,o=l.columns,u=l.columnProps,x=l.columnsMap,g=l.loading,i=l.screenfull,f=l.showInteractionOnSreenfull,s=l.total,C=l.params,Z=l.fStatic,m=l.run,r=l.scroll,c=Ye(o,x,u),h=N()(c,1),R=h[0],S=Le({page:C.page,total:s,size:C.size,run:m,fStatic:Z}),M=S.onChange,T=S.pagination,j=v.useRef(null),b=Je(j,{pagination:T,columns:o,dataSource:a,scrollSwitch:r}),P=N()(b,1),W=P[0],w=e.tips,z=e.interaction,O=function(){return(i==null?void 0:i.status)===2?f?z:null:z};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(K.Z,{justify:"space-between",style:{margin:"10px 0"},children:[(0,t.jsx)(A.Z,{children:O()}),(0,t.jsx)(A.Z,{children:(0,t.jsx)(Be,{})})]}),(0,t.jsx)(K.Z,{style:{marginBottom:5},children:(0,t.jsx)(A.Z,{span:24,children:w})}),(0,t.jsx)(xe.Z,p()({ref:j,rowKey:"frontendRowkey",dataSource:a,loading:g,columns:R,scroll:W,pagination:T,onChange:M},e))]})}function st(e){var n,l=e.service,a=e.dataSource,o=e.columns,u=e.loading,x=e.resultSettings,g=e.fetchSettings,i=e.defaultParams,f=e.control,s=e.interaction,C=e.tips,Z=e.formatParams,m=e.formatResult,r=e.onScreenfull,c=e.table,h=e.manual,R=e.showInteractionOnSreenfull,S=e.screenfullWrapRef,M=e.columnProps,T=e.fStatic,j=ee()(e,it),b=(n=v.useContext(te))===null||n===void 0?void 0:n.table,P=v.useRef(null),W=v.useRef(l),w=v.useRef(Z);w.current=Z;var z=v.useRef(m);z.current=m;var O=v.useRef(r);O.current=r;var F=ie(c),V=N()(F,1),X=V[0],$=X==null?void 0:X.getState().action;return v.useEffect(function(){var H=(0,I.merge)({dataSource:a,columns:o},(0,I.omit)(le,["dataSource","columns"]),b,{tableWrapRef:P,formatParamsRef:w,onScreenfullRef:O,serviceRef:W,formatResultRef:z,fetchSettings:g,resultSettings:x,screenfullWrapRef:S,showInteractionOnSreenfull:R,params:i,control:f,loading:u,fStatic:T,columnProps:M});$==null||$.setDefaultVals(H)},[]),v.useEffect(function(){$==null||$.setColumnMap(re(o)),$==null||$.setColumns(o)},[o]),v.useEffect(function(){h!==!0&&($==null||$.run())},[]),(0,t.jsx)("div",{ref:P,style:at,children:(0,t.jsx)(Q.Provider,{value:X,children:(0,t.jsx)(ut,p()({interaction:s,bordered:!0,tips:C},j))})})}var ct=st,dt=d(27918);function ae(e,n){return n.split(".").reduce(function(l,a){return l&&l[a]},e)}function ft(e,n){var l=v.useRef(n),a=v.useRef(null),o=v.useState(function(){return ae(e==null?void 0:e.getState(),n)}),u=N()(o,2),x=u[0],g=u[1];return(0,dt.Z)(function(){a.current=e==null?void 0:e.subscribe(function(i){return ae(i,l.current)},function(i){g(i)},{fireImmediately:!0})},[]),v.useEffect(function(){return function(){var i;(i=a.current)===null||i===void 0||i.call(a)}},[]),[x]}var q=ct;q.useWatch=ft,q.useTable=ie;var vt=q}}]);
