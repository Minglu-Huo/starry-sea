"use strict";(self.webpackChunkstarry_sea=self.webpackChunkstarry_sea||[]).push([[433],{44522:function(se,X,a){a.r(X);var te=a(67294),G=a(18271),J=a(85893);function h(T){return console.log("\u{1F680} ~ service ~ params:",T),new Promise(function(z){setTimeout(function(){z([{name:T==null?void 0:T.value,id:Math.round(Math.random()*10)}])},2e3)})}function Y(){return(0,J.jsx)(G.jY,{service:h,style:{width:200},formatResult:function(z){return z.map(function(k){return{label:k.name,value:k.id}})},formatParams:function(z){return console.log("\u{1F680} ~ Demo ~ params:",z),z},searchKey:"value",serviceOptions:{defaultParams:[{value:"1"}]}})}X.default=Y},53087:function(se,X,a){a.r(X);var te=a(5574),G=a.n(te),J=a(67294),h=a(18271),Y=a(85893),T=function(D){for(var d=[],t=0;t<D;t++)d.push({name:"\u5F20\u98DE",phone:"0571-"+Math.round(Math.random()*1e7),address:"\u5317\u4EAC\u5E02\u77F3\u666F\u5C71\u533A\u542F\u8FEA\u9999\u5C71"});return d};function z(H){return console.log("\u{1F680} ~ service ~ params:",H),new Promise(function(D){setTimeout(function(){D({list:T(100),total:100})},1e3)})}var k=[{title:"\u5E8F\u53F7",dataIndex:"frontendSortnum"},{title:"\u59D3\u540D",dataIndex:"name",sorter:!0},{title:"\u7535\u8BDD",dataIndex:"phone",filters:[{text:"1",value:1},{text:"2",value:2},{text:"3",value:3,children:[{text:"3-1",value:31}]}],onFilter:function(D,d){return console.log("\u{1F680} ~ onFilter ~ record:",d,D),String(d.phone).indexOf(String(D))!==-1}},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u5730\u57401",dataIndex:"1"},{title:"\u5730\u57402",dataIndex:"2"},{title:"\u5730\u57403",dataIndex:"3"}];function ne(){var H=h.m7.useTable(),D=G()(H,1),d=D[0],t=J.useRef(null);return(0,Y.jsx)("div",{ref:t,children:(0,Y.jsx)(h.v6,{table:{fetchSettings:{pageNumField:"c",pageSizeField:"pagesize"},columnProps:{align:"right"}},children:(0,Y.jsx)(h.m7,{table:d,fStatic:!0,service:z,control:{scrollY:{status:2}},columns:k,onChange:function(ae,_,ce){console.log(ae,_,ce)}})})})}X.default=ne},4570:function(se,X,a){a.r(X);var te=a(5574),G=a.n(te),J=a(10932),h=a(67294),Y=a(18271),T=a(85893),z=function(d){for(var t=[],Q=0;Q<d;Q++)t.push({name:"\u5F20\u98DE",phone:"0571-"+Math.round(Math.random()*1e7),address:"\u5317\u4EAC\u5E02\u77F3\u666F\u5C71\u533A\u542F\u8FEA\u9999\u5C71"});return t};function k(D){return console.log("\u{1F680} ~ service ~ params:",D),new Promise(function(d){setTimeout(function(){d({list:z(D.pagesize),total:100})},1e3)})}var ne=[{title:"\u5E8F\u53F7",dataIndex:"frontendSortnum"},{title:"\u59D3\u540D",dataIndex:"name",sorter:!0},{title:"\u7535\u8BDD",dataIndex:"phone",filters:[{text:"1",value:1},{text:"2",value:2},{text:"3",value:3,children:[{text:"3-1",value:31}]}]},{title:"\u5730\u5740",dataIndex:"address"}];function H(){var D=Y.m7.useTable(),d=G()(D,1),t=d[0],Q=h.useRef(null);return(0,T.jsx)("div",{ref:Q,children:(0,T.jsx)(Y.m7,{table:t,service:k,defaultParams:{a:1},interaction:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(J.ZP,{style:{marginRight:5},type:"primary",children:"\u65B0\u589E"}),(0,T.jsx)(J.ZP,{danger:!0,children:"\u5220\u9664"})]}),formatResult:function(_){return _},formatParams:function(_){return _},columnProps:{align:"left"},screenfullWrapRef:Q,fetchSettings:{pageNumField:"pagenum",pageSizeField:"pagesize"},resultSettings:{dataSourceField:"list",totalField:"total"},columns:ne,showInteractionOnSreenfull:!0})})}X.default=H},18271:function(se,X,a){a.d(X,{jY:function(){return Pe},v6:function(){return Ee},m7:function(){return yt}});var te=a(9783),G=a.n(te),J=a(97857),h=a.n(J),Y=a(13769),T=a.n(Y),z=a(13901),k=a(3930),ne=a(85980),H=a(75081),D=a(20232),d=a(67294),t=a(85893),Q=["service","serviceOptions","searchKey","formatResult","formatParams"],ae={manual:!0,debounceWait:600};function _(e){var n=e.service,l=e.serviceOptions,i=e.searchKey,o=i===void 0?"keywords":i,s=e.formatResult,x=e.formatParams,g=T()(e,Q),u=h()(h()({},ae),l),v=(0,z.Z)(n,u),c=v.data,y=v.loading,M=v.mutate,S=v.run,r=(0,k.Z)(x),f=(0,k.Z)(s),m=d.useMemo(function(){return!Array.isArray(c)||c.length<1?[]:typeof f.current=="function"?f.current(c):c},[c]),p=function(I){M();var R=G()({},o,I);typeof r.current=="function"&&(R=r.current(R)),S(R)},C=(0,ne.Z)(p,{wait:300}),b=y?(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:20},children:(0,t.jsx)(H.Z,{size:"small"})}):null;return(0,t.jsx)(D.Z,h()({options:m,showSearch:!0,filterOption:!1,labelInValue:!0,onSearch:C.run,loading:y,notFoundContent:b,allowClear:!0},g))}var ce=_,Pe=ce,me=d.createContext(null),be=["children"];function Me(e){var n=e.children,l=T()(e,be);return(0,t.jsx)(me.Provider,{value:l,children:n})}var Ee=Me,Oe=a(5574),re=a.n(Oe),oe=a(25968),$=a(6226),Te=a(56547),L=a(96486),ge=a(73445),Ze=a(81977),Fe=a(34821),Ie=a(55192),De=a(21284),de=a(16165),Ae=a(71146),We=a(23521),$e=a(77145),we=a(15026),N=a(61781),Be=a(18707),ze=a(55959),q=a(10932),Le=a(74627),ee=a(47489),fe=d.createContext(null);function Se(e){if(!Array.isArray(e))return{};var n={};return e.forEach(function(l,i){var o="";l.key?o=l.key:l.dataIndex&&(o=l.dataIndex.toString()),n[o]={title:l.title,hidden:l.hidden,fixed:l.fixed,order:i,key:o}}),n}var Ke=function(){return(0,t.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024",children:(0,t.jsx)("path",{d:"M639.627772 892.931872 226.749304 892.931872c-54.56985 0-98.806353-44.237527-98.806353-98.806353L127.942951 226.14146c0-54.56985 44.237527-98.806353 98.806353-98.806353l569.914014 0c54.56985 0 98.806353 44.237527 98.806353 98.806353l0 413.525198 63.960731 0L959.430402 209.447243c0-80.317257-65.109903-145.426137-145.426137-145.426137L209.408357 64.021106c-80.316234 0-145.426137 65.109903-145.426137 145.426137L63.98222 814.043151c0 80.317257 65.109903 145.426137 145.426137 145.426137l430.219415 0L639.627772 892.931872zM959.430402 921.185356 710.73425 672.489204c35.524075-43.930535 56.81396-99.846032 56.81396-160.742984 0-141.29812-114.544803-255.842922-255.842922-255.842922S255.863389 370.447077 255.863389 511.745197s114.544803 255.842922 255.842922 255.842922c60.896952 0 116.813472-21.289885 160.744008-56.81396l248.696152 248.696152L959.430402 921.185356zM511.706311 703.627389c-105.97359 0-191.882192-85.908602-191.882192-191.882192s85.908602-191.882192 191.882192-191.882192 191.882192 85.908602 191.882192 191.882192S617.679901 703.627389 511.706311 703.627389z",fill:"#272636"})})},Xe=function(){return(0,t.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024",children:(0,t.jsx)("path",{d:"M512 993.415l275.094-412.641H236.906z m0-962.83L236.906 443.226h550.188z",fill:"#333333"})})},Ye=function(){return(0,t.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024",children:(0,t.jsx)("path",{d:"M481.706667 414.293333a42.666667 42.666667 0 0 0 60.586666 0l213.333334-213.333333a42.666667 42.666667 0 1 0-60.586667-60.586667L512 323.84l-183.04-183.466667a42.666667 42.666667 0 0 0-60.586667 60.586667z m60.586666 195.413334a42.666667 42.666667 0 0 0-60.586666 0l-213.333334 213.333333a42.666667 42.666667 0 0 0 60.586667 60.586667l183.04-183.466667 183.04 183.466667a42.666667 42.666667 0 0 0 60.586667 0 42.666667 42.666667 0 0 0 0-60.586667z"})})},Ne=function(){return(0,t.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024",children:(0,t.jsx)("path",{d:"M200.96 268.373333a42.666667 42.666667 0 0 0-60.586667 60.586667L323.84 512l-183.466667 183.04a42.666667 42.666667 0 0 0 0 60.586667 42.666667 42.666667 0 0 0 60.586667 0l213.333333-213.333334a42.666667 42.666667 0 0 0 0-60.586666zM700.16 512l183.466667-183.04a42.666667 42.666667 0 1 0-60.586667-60.586667l-213.333333 213.333334a42.666667 42.666667 0 0 0 0 60.586666l213.333333 213.333334a42.666667 42.666667 0 0 0 60.586667 0 42.666667 42.666667 0 0 0 0-60.586667z"})})},Ue=function(){return(0,t.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024",children:(0,t.jsx)("path",{d:"M409.6 307.2l-256 204.8 256 204.8zM614.4 307.2l256 204.8-256 204.8z",fill:"#000000"})})};function ve(e){var n=e.colSettingsOptions,l=e.handleFixed,i=e.handleDrop,o=e.handleChange,s=e.checkedKeys,x=e.title,g=e.fixed,u=d.useState(""),v=re()(u,2),c=v[0],y=v[1],M=s.filter(function(r){return n.some(function(f){return f.key===r})}),S=function(f){var m=(0,t.jsx)(N.Z,{title:"\u56FA\u5B9A\u5728\u5DE6\u4FA7",children:(0,t.jsx)(Ze.Z,{onClick:l(f,"left"),style:{color:"#1677FF"}})}),p=(0,t.jsx)(N.Z,{title:"\u56FA\u5B9A\u5728\u53F3\u4FA7",children:(0,t.jsx)(Fe.Z,{onClick:l(f,"right"),style:{color:"#1677FF"}})}),C=(0,t.jsxs)(N.Z,{title:"\u53D6\u6D88\u56FA\u5B9A",children:[(0,t.jsx)(Ie.Z,{onClick:l(f),style:{color:"#1677FF"}}),"bbb"]});return g==="left"?(0,t.jsxs)($.Z,{children:[C,p]}):g==="right"?(0,t.jsxs)($.Z,{children:[m,C]}):(0,t.jsxs)($.Z,{children:[m,p]})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(Be.Z.Text,{type:"secondary",children:[" ",x]}),(0,t.jsx)(ze.Z,{treeData:n,checkedKeys:M,blockNode:!0,titleRender:function(f){return(0,t.jsxs)(oe.Z,{justify:"space-between",onClick:function(p){return p.stopPropagation()},onMouseMove:function(){return y(f.key)},children:[(0,t.jsx)($.Z,{children:f.title}),c===f.key&&S(f.key)]})},onDrop:i,selectable:!1,onCheck:o,checkable:!0,draggable:!0})]})}function ke(e){var n=e.colSettingsOptions,l=e.handleFixed,i=e.handleDrop,o=e.handleChange,s=e.checkedKeys,x=n.filter(function(c){return c.fixed==="left"}),g=n.filter(function(c){return c.fixed==="right"}),u=n.filter(function(c){return c.fixed!=="right"&&c.fixed!=="left"}),v=!0;return(x.length===0&&g.length===0||x.length===0&&u.length===0||g.length===0&&u.length===0)&&(v=!1),(0,t.jsxs)("div",{children:[x.length>0?(0,t.jsx)(ve,{title:v?"\u56FA\u5B9A\u5728\u5DE6\u4FA7":"",fixed:"left",colSettingsOptions:x,handleFixed:l,handleChange:o,handleDrop:i,checkedKeys:s}):null,u.length>0?(0,t.jsx)(ve,{title:v?"\u672A\u56FA\u5B9A":"",colSettingsOptions:u,handleFixed:l,handleChange:o,handleDrop:i,checkedKeys:s}):null,g.length>0?(0,t.jsx)(ve,{fixed:"right",title:v?"\u56FA\u5B9A\u5728\u53F3\u4FA7":"",colSettingsOptions:g,handleFixed:l,handleChange:o,handleDrop:i,checkedKeys:s}):null]})}function He(){var e,n,l,i,o,s,x,g,u,v,c,y,M=d.useContext(fe);if(!M)throw new Error("Missing StoreProvider");var S=(0,ge.oR)(M,function(j){return{control:j.control,columnMap:j.columnMap,columns:j.columns,loading:j.loading,action:j.action,tableWrapRef:j.tableWrapRef,onScreenfullRef:j.onScreenfullRef,screenfullWrapRef:j.screenfullWrapRef}}),r=S.control,f=S.columnMap,m=S.loading,p=S.columns,C=S.tableWrapRef,b=S.onScreenfullRef,F=S.screenfullWrapRef,I=S.action,R=I.setControl,P=I.refresh,A=I.setColumnMap,O=d.useRef(null);d.useEffect(function(){var j=function(){ee.Z.isFullscreen?R("screenfull",{status:2}):R("screenfull",{status:1})};return ee.Z.on("change",j),function(){ee.Z.off("change",j)}},[]);var K=d.useMemo(function(){return Object.keys(f).filter(function(j){return f[j].hidden!==!0})},[f]),B=function(Z,U){return function(){switch(Z){case"search":R(Z,{status:U});case"scrollX":case"scrollY":R(Z,{status:U});break;case"screenfull":if((0,L.isFunction)(b==null?void 0:b.current)){var w;b==null||(w=b.current)===null||w===void 0||w.call(b);return}ee.Z.isFullscreen?ee.Z.exit():F.current?ee.Z.request(F.current):C.current&&ee.Z.request(C.current);break;default:break}}},E=d.useMemo(function(){if(!f)return[];var j=Object.keys(f);return j.map(function(Z){return{title:f[Z].title,key:Z,fixed:f[Z].fixed}}).sort(function(Z,U){return f[Z.key].order-f[U.key].order})},[f]),ie=function(){A(Se(p))},V=function(Z,U){return function(){var w=(0,L.cloneDeep)(f);w[Z].fixed=U,A(w)}},W=d.useCallback(function(j){var Z=(0,L.cloneDeep)(f),U=Object.keys(Z);U.forEach(function(w){j.includes(w)?Z[w].hidden=!1:Z[w].hidden=!0}),A(Z)},[A,f]),le=d.useCallback(function(j){var Z=j.node,U=j.dragNode,w=(0,L.cloneDeep)(f),Re=w[Z.key],je=w[U.key],Ct=Re.order;Re.order=je.order,je.order=Ct,A(w)},[f,A]);return(0,t.jsxs)(oe.Z,{gutter:[5,5],children:[(r==null||(e=r.search)===null||e===void 0?void 0:e.visible)&&(0,t.jsx)($.Z,{children:(0,t.jsx)(N.Z,{title:(n=r.search.option)===null||n===void 0?void 0:n.statusMap[r.search.status].title,getPopupContainer:function(){return O.current},children:(0,t.jsx)(q.ZP,{disabled:r.search.disabled,onClick:B("search",r.search.status===1?2:1),icon:r.search.status===1?(0,t.jsx)(De.Z,{}):(0,t.jsx)(de.Z,{component:Ke})})})}),(r==null||(l=r.screenfull)===null||l===void 0?void 0:l.visible)&&(0,t.jsx)($.Z,{children:(0,t.jsx)(N.Z,{title:(i=r.screenfull.option)===null||i===void 0?void 0:i.statusMap[r.screenfull.status].title,getPopupContainer:function(){return O.current},children:(0,t.jsx)(q.ZP,{onClick:B("screenfull"),disabled:r.screenfull.disabled,icon:r.screenfull.status===1?(0,t.jsx)(Ae.Z,{}):(0,t.jsx)(We.Z,{})})})}),(r==null||(o=r.scrollX)===null||o===void 0?void 0:o.visible)&&(0,t.jsx)($.Z,{children:(0,t.jsx)(N.Z,{title:(s=r.scrollX.option)===null||s===void 0?void 0:s.statusMap[r.scrollX.status].title,getPopupContainer:function(){return O.current},children:(0,t.jsx)(q.ZP,{disabled:r.scrollX.disabled,onClick:B("scrollX",r.scrollX.status===1?2:1),icon:(0,t.jsx)(de.Z,{component:r.scrollX.status===1?Ue:Ne})})})}),(r==null||(x=r.scrollY)===null||x===void 0?void 0:x.visible)&&(0,t.jsx)($.Z,{children:(0,t.jsx)(N.Z,{title:(g=r.scrollY.option)===null||g===void 0?void 0:g.statusMap[r.scrollY.status].title,getPopupContainer:function(){return O.current},children:(0,t.jsx)(q.ZP,{disabled:r.scrollY.disabled,onClick:B("scrollY",r.scrollY.status===1?2:1),icon:(0,t.jsx)(de.Z,{component:r.scrollY.status===1?Xe:Ye})})})}),(r==null||(u=r.refresh)===null||u===void 0?void 0:u.visible)&&(0,t.jsx)($.Z,{children:(0,t.jsx)(N.Z,{title:(v=r.refresh.option)===null||v===void 0?void 0:v.statusMap[r.refresh.status].title,getPopupContainer:function(){return O.current},children:(0,t.jsx)(q.ZP,{onClick:P,disabled:r.refresh.disabled,icon:(0,t.jsx)($e.Z,{spin:m})})})}),(r==null||(c=r.colSettings)===null||c===void 0?void 0:c.visible)&&(0,t.jsx)($.Z,{ref:O,children:(0,t.jsx)(Le.Z,{placement:"leftBottom",showArrow:!0,trigger:"click",getPopupContainer:function(){return O.current},title:(0,t.jsxs)(oe.Z,{justify:"space-between",align:"middle",children:[(0,t.jsx)($.Z,{children:"\u5217\u8BBE\u7F6E"}),(0,t.jsx)($.Z,{children:(0,t.jsx)(q.ZP,{type:"link",onClick:ie,children:"\u91CD\u7F6E"})})]}),content:(0,t.jsx)(ke,{handleChange:W,handleFixed:V,colSettingsOptions:E,handleDrop:le,checkedKeys:K}),children:(0,t.jsx)(N.Z,{title:(y=r.colSettings.option)===null||y===void 0?void 0:y.statusMap[r.colSettings.status].title,getPopupContainer:function(){return O.current},children:(0,t.jsx)(q.ZP,{disabled:r.colSettings.disabled,icon:(0,t.jsx)(we.Z,{})})})})})]})}var Ve=d.memo(He),pe={dataSource:[],loading:!1,columns:[],showInteractionOnSreenfull:!1,tableWrapRef:{current:null},screenfullWrapRef:{current:null},formatParamsRef:{current:void 0},formatResultRef:{current:void 0},onScreenfullRef:{current:void 0},control:{screenfull:{visible:!0,disabled:!1,status:1,option:{statusMap:{1:{title:"\u5168\u5C4F"},2:{title:"\u9000\u51FA\u5168\u5C4F"}}}},scrollY:{visible:!0,disabled:!1,status:1,option:{offset:100,statusMap:{1:{title:"\u5F00\u542F\u7EB5\u5411\u6EDA\u52A8"},2:{title:"\u5173\u95ED\u7EB5\u5411\u6EDA\u52A8"}}}},scrollX:{visible:!1,disabled:!1,status:1,option:{statusMap:{1:{title:"\u5F00\u542F\u6A2A\u5411\u6EDA\u52A8"},2:{title:"\u5173\u95ED\u6A2A\u5411\u6EDA\u52A8"}}}},search:{visible:!1,disabled:!1,status:1,option:{statusMap:{1:{title:"\u9AD8\u7EA7\u67E5\u8BE2"},2:{title:"\u7B80\u6613\u67E5\u8BE2"}}}},refresh:{visible:!0,disabled:!1,status:1,option:{statusMap:{1:{title:"\u5237\u65B0"}}}},colSettings:{visible:!0,disabled:!1,status:1,option:{statusMap:{1:{title:"\u5217\u8BBE\u7F6E"}}}}},serviceRef:{current:null},columnMap:{},fetchSettings:{pageSizeField:"size",pageNumField:"page"},resultSettings:{dataSourceField:"list",totalField:"total"},params:{page:1,size:10},columnProps:{align:"left"}},Ge=a(27484),Je=a.n(Ge);function Qe(e,n,l,i){if(typeof n=="function")return n(e,l,i);if(n instanceof Map)return n.get(e);var o="date|";if(typeof n=="string"&&n.startsWith(o)){var s=n.replace(o,"");return Je()(e).format(s)}return n==="tooltip"?(0,t.jsx)(N.Z,{title:e,children:e}):e}function _e(e,n,l){var i=d.useMemo(function(){if(!Array.isArray(e))return[];var o=e.map(function(s){var x,g=s.key||((x=s.dataIndex)===null||x===void 0?void 0:x.toString()),u=n[g];if(!u)return h()(h()({},s),l);if(u.hidden===!0)return!1;var v=s.format,c=s.render;return v?!c&&v?h()(h()(h()({},s),l),{},{fixed:u.fixed,render:function(M,S,r){return Qe(M,v,S,r)}}):h()(h()({},s),l):h()(h()(h()({},s),l),{},{fixed:u.fixed})}).filter(Boolean);return o.sort(function(s,x){var g,u,v,c,y,M,S=s.key||((g=s.dataIndex)===null||g===void 0?void 0:g.toString()),r=x.key||((u=x.dataIndex)===null||u===void 0?void 0:u.toString()),f=(v=n[S])===null||v===void 0?void 0:v.fixed,m=(c=n[r])===null||c===void 0?void 0:c.fixed;return f==="left"&&m!=="left"||m==="right"&&f!=="right"?-2:m==="left"&&f!=="left"||f==="right"&&m!=="right"?2:((y=n[S])===null||y===void 0?void 0:y.order)-((M=n[r])===null||M===void 0?void 0:M.order)}),o},[e,l,n]);return[i]}function qe(e){var n=e.page,l=e.total,i=e.size,o=e.run,s=e.fStatic,x=d.useCallback(function(u,v,c){var y=u.pageSize,M=u.current,S={size:y,page:M,filters:v,sorters:c};o==null||o(S)},[o]),g=d.useMemo(function(){return s?{showQuickJumper:!0,showSizeChanger:!0,showTotal:function(v){return(0,t.jsxs)("span",{children:["\u5171",v,"\u6761"]})},itemRender:function(v,c,y){return c==="prev"?(0,t.jsx)("span",{className:"cursor-pointer",children:"\u4E0A\u4E00\u9875"}):c==="next"?(0,t.jsx)("span",{className:"cursor-pointer",children:"\u4E0B\u4E00\u9875"}):y}}:{showQuickJumper:!0,total:l,current:Number(n),pageSize:Number(i),showSizeChanger:!0,showTotal:function(v){return(0,t.jsxs)("span",{children:["\u5171",v,"\u6761"]})},itemRender:function(v,c,y){return c==="prev"?(0,t.jsx)("span",{className:"cursor-pointer",children:"\u4E0A\u4E00\u9875"}):c==="next"?(0,t.jsx)("span",{className:"cursor-pointer",children:"\u4E0B\u4E00\u9875"}):y}}},[n,i,l]);return{pagination:g,onChange:s?void 0:x}}var ue="ant";function et(e){var n=d.useRef(!0),l=d.useRef(null);return n.current&&(n.current=!1,l.current=e()),l}function tt(e,n){var l=(0,ne.Z)(e,n),i=l.run,o=et(function(){return n==null?void 0:n.immediate});return d.useEffect(function(){return window.addEventListener("resize",i),function(){window.removeEventListener("resize",i)}},[i]),d.useEffect(function(){o&&e()},[e,o]),[i]}function nt(e){return!e||!e.getBoundingClientRect?null:e.getBoundingClientRect()}function rt(e){if(!e)return{top:0,left:0,bottom:0,bottomIncludeBody:0,right:0,rightIncludeBody:0,docClientWidth:window.document.documentElement.clientWidth,docClientHeight:window.document.documentElement.clientHeight};var n=document.documentElement,l=n.clientLeft,i=n.clientTop,o=window.scrollX||n.scrollLeft,s=window.scrollY||n.scrollTop,x=nt(e),g=x||{left:0,top:0,width:0,height:0},u=g.left,v=g.top,c=g.width,y=g.height,M=o-(l||0),S=s-(i||0),r=u+o,f=v+s,m=r-M,p=f-S,C=window.document.documentElement.clientWidth,b=window.document.documentElement.clientHeight;return{left:m,top:p,right:C-c-m,bottom:b-y-p,rightIncludeBody:C-m,bottomIncludeBody:b-p,docClientWidth:C,docClientHeight:b}}function lt(e,n){var l=n.pagination,i=n.columns,o=n.dataSource,s=n.scrollSwitch,x=d.useState({}),g=re()(x,2),u=g[0],v=g[1],c=d.useMemo(function(){var S,r,f,m;if(!((S=s.x)!==null&&S!==void 0&&S.disabled||((r=s.x)===null||r===void 0?void 0:r.status)===2)&&!(!Array.isArray(i)||!e.current||!Array.isArray(o)||o.length===0)){var p=0,C=150,b=(f=e.current)===null||f===void 0?void 0:f.nativeElement;i.forEach(function(P){P.width&&typeof P.width=="string"?p+=Number.parseInt(P.width,10):P.width&&typeof P.width=="number"&&(p+=P.width)});var F=i.filter(function(P){return!P.hidden}),I=F.filter(function(P){return!Reflect.has(P,"width")});I.length&&(p=I.length*C);var R=(m=b==null?void 0:b.offsetWidth)!==null&&m!==void 0?m:0;return R>p&&(p="100%"),p}},[s,i,o]),y=d.useMemo(function(){var S,r,f,m;if(!((s==null||(S=s.y)===null||S===void 0?void 0:S.status)===2||(r=s.y)!==null&&r!==void 0&&r.disabled)&&!(!Array.isArray(i)||!e.current||!Array.isArray(o)||o.length===0)){var p=s==null||(f=s.y)===null||f===void 0?void 0:f.option,C=(m=e.current)===null||m===void 0?void 0:m.nativeElement,b=C==null?void 0:C.querySelector(".".concat(ue,"-table-tbody"));if(b){var F=C==null?void 0:C.querySelector(".".concat(ue,"-table-thead")),I,R;if(F){var P=rt(F),A=P.bottomIncludeBody,O=0;if(l)if(R=C==null?void 0:C.querySelector(".".concat(ue,"-pagination")),R){var K,B,E,ie=(K=R)===null||K===void 0?void 0:K.offsetHeight;O+=ie||0,O+=parseInt((B=getComputedStyle(R))===null||B===void 0?void 0:B.marginTop,10),O+=parseInt((E=getComputedStyle(R))===null||E===void 0?void 0:E.marginBottom,10)}else O+=24;else O=-8;var V=0;if(!(0,L.isBoolean)(l))if(!I)I=C==null?void 0:C.querySelector(".".concat(ue,"-table-footer"));else{var W=I.offsetHeight;V+=W||0}var le=0;F&&(le=F.offsetHeight);var j=A-O-V-le-(p==null?void 0:p.offset);return j}}}},[s,i,o,l]),M=d.useCallback(function(){if(!c&&!y){v({});return}v({x:c,y})},[c,y]);return tt(M,{wait:300,immediate:!0}),console.log("\u{1F680} ~ scroll:",u),[u]}var at=a(15009),xe=a.n(at),ot=a(52677),it=a.n(ot),ut=a(99289),st=a.n(ut),ct=a(43973),dt=a(782);function ft(){return(0,ct.M)()((0,dt.XR)(function(e,n){return h()(h()({},pe),{},{action:{setDefaultVals:function(i){e(function(o){return h()(h()({},o),i)})},setColumnMap:function(i){e(function(o){return h()(h()({},o),{},{columnMap:i})})},setColumns:function(i){e(function(o){return h()(h()({},o),{},{columns:i})})},setControl:function(i,o){e(function(s){return h()(h()({},s),{},{control:h()(h()({},s.control),{},G()({},i,h()(h()({},s.control[i]),o)))})})},run:function(){var l=st()(xe()().mark(function o(s){var x,g,u,v,c,y,M,S,r,f,m,p,C,b,F;return xe()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(R.prev=0,g=n().serviceRef.current,(0,L.isFunction)(g)){R.next=4;break}return R.abrupt("return");case 4:return u=h()({},(0,L.merge)({},n().params,s)),e(function(P){return h()(h()({},P),{},{loading:!0,params:u})}),v=n().fetchSettings,c=(0,L.cloneDeep)(u),Reflect.has(c,v.pageNumField)||(c[v.pageNumField]=c.page,delete c.page),Reflect.has(c,v.pageSizeField)||(c[v.pageSizeField]=c.size,delete c.size),(0,L.isFunction)((x=n().formatParamsRef)===null||x===void 0?void 0:x.current)&&(c=(y=n().formatParamsRef)===null||y===void 0||(M=y.current)===null||M===void 0?void 0:M.call(y,c)),S=n().resultSettings,r=S.dataSourceField,f=S.totalField,R.next=15,g(c);case 15:m=R.sent,p=n().formatResultRef,(0,L.isFunction)(p==null?void 0:p.current)&&(m=p==null||(C=p.current)===null||C===void 0?void 0:C.call(p,m)),it()(m)==="object"&&m!==null&&!Array.isArray(m)&&Reflect.has(m,r)&&Array.isArray(m[r])&&(b=m[r],F=m[f]||b.length,b.forEach(function(P,A){P.frontendRowkey=P.id||A+1,n().fStatic?P.frontendSortnum=A+1:P.frontendSortnum=((u==null?void 0:u.page)-1)*(u==null?void 0:u.size)+A+1}),e(function(P){return h()(h()({},P),{},{dataSource:b,total:F,loading:!1})})),R.next=25;break;case 21:R.prev=21,R.t0=R.catch(0),e(function(P){return h()(h()({},P),{},{loading:!1})}),console.log("\u{1F680} ~ run: ~ error:",R.t0);case 25:case"end":return R.stop()}},o,null,[[0,21]])}));function i(o){return l.apply(this,arguments)}return i}(),refresh:function(){n().action.run()}}})}))}function ye(e){var n=d.useRef();return n.current||(e?n.current=e:n.current=ft()),[n.current]}var vt=["service","dataSource","columns","loading","resultSettings","fetchSettings","defaultParams","control","interaction","tips","formatParams","formatResult","onScreenfull","table","manual","showInteractionOnSreenfull","screenfullWrapRef","columnProps","fStatic"],ht={padding:20,background:"#fff"};function mt(e){var n=d.useContext(fe);if(!n)throw new Error("Missing StoreProvider");var l=(0,ge.oR)(n,function(E){return{dataSource:E.dataSource,columns:E.columns,columnProps:E.columnProps,loading:E.loading,run:E.action.run,total:E.total,fStatic:E.fStatic,columnsMap:E.columnMap,scroll:{y:E.control.scrollY,x:E.control.scrollX},params:E.params,screenfull:E.control.screenfull,showInteractionOnSreenfull:E.showInteractionOnSreenfull}}),i=l.dataSource,o=l.columns,s=l.columnProps,x=l.columnsMap,g=l.loading,u=l.screenfull,v=l.showInteractionOnSreenfull,c=l.total,y=l.params,M=l.fStatic,S=l.run,r=l.scroll,f=_e(o,x,s),m=re()(f,1),p=m[0],C=qe({page:y.page,total:c,size:y.size,run:S,fStatic:M}),b=C.onChange,F=C.pagination,I=d.useRef(null),R=lt(I,{pagination:F,columns:o,dataSource:i,scrollSwitch:r}),P=re()(R,1),A=P[0],O=e.tips,K=e.interaction,B=function(){return(u==null?void 0:u.status)===2?v?K:null:K};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(oe.Z,{justify:"space-between",style:{margin:"10px 0"},children:[(0,t.jsx)($.Z,{children:B()}),(0,t.jsx)($.Z,{children:(0,t.jsx)(Ve,{})})]}),(0,t.jsx)(oe.Z,{style:{marginBottom:5},children:(0,t.jsx)($.Z,{span:24,children:O})}),(0,t.jsx)(Te.Z,h()({ref:I,rowKey:"frontendRowkey",dataSource:i,loading:g,columns:p,scroll:A,pagination:F,onChange:b},e))]})}function gt(e){var n,l=e.service,i=e.dataSource,o=e.columns,s=e.loading,x=e.resultSettings,g=e.fetchSettings,u=e.defaultParams,v=e.control,c=e.interaction,y=e.tips,M=e.formatParams,S=e.formatResult,r=e.onScreenfull,f=e.table,m=e.manual,p=e.showInteractionOnSreenfull,C=e.screenfullWrapRef,b=e.columnProps,F=e.fStatic,I=T()(e,vt),R=(n=d.useContext(me))===null||n===void 0?void 0:n.table,P=d.useRef(null),A=d.useRef(l),O=d.useRef(M);O.current=M;var K=d.useRef(S);K.current=S;var B=d.useRef(r);B.current=r;var E=ye(f),ie=re()(E,1),V=ie[0],W=V==null?void 0:V.getState().action;return d.useEffect(function(){var le=(0,L.merge)({dataSource:i,columns:o},(0,L.omit)(pe,["dataSource","columns"]),R,{tableWrapRef:P,formatParamsRef:O,onScreenfullRef:B,serviceRef:A,formatResultRef:K,fetchSettings:g,resultSettings:x,screenfullWrapRef:C,showInteractionOnSreenfull:p,params:u,control:v,loading:s,fStatic:F,columnProps:b});W==null||W.setDefaultVals(le)},[]),d.useEffect(function(){W==null||W.setColumnMap(Se(o)),W==null||W.setColumns(o)},[o]),d.useEffect(function(){m!==!0&&(W==null||W.run())},[]),(0,t.jsx)("div",{ref:P,style:ht,children:(0,t.jsx)(fe.Provider,{value:V,children:(0,t.jsx)(mt,h()({interaction:c,bordered:!0,tips:y},I))})})}var St=gt,pt=a(27918);function Ce(e,n){return n.split(".").reduce(function(l,i){return l&&l[i]},e)}function xt(e,n){var l=d.useRef(n),i=d.useRef(null),o=d.useState(function(){return Ce(e==null?void 0:e.getState(),n)}),s=re()(o,2),x=s[0],g=s[1];return(0,pt.Z)(function(){i.current=e==null?void 0:e.subscribe(function(u){return Ce(u,l.current)},function(u){g(u)},{fireImmediately:!0})},[]),d.useEffect(function(){return function(){var u;(u=i.current)===null||u===void 0||u.call(i)}},[]),[x]}var he=St;he.useWatch=xt,he.useTable=ye;var yt=he}}]);
